1. 
S3와 S3-IA(Infrequent Access), S3 One Zone-IA, Glacier 의 내구성은 같다. 하지만
S3 의 가용성 = 99.99%
S3-IA 의 가용성 = 99.9%
S3 One Zone-IA = 99.5%
Glacier 는 S3보다 지연시간이 길다.

S3에는 0 바이트 객체를 저장할 수 있고, 요금도 0바이트를 기준으로 청구한다.
S3-IA 에서는 128KB보다 작은 용량의 객체도 128KB 로 요금(최소요금)을 청구한다. 



2. 
비디오 처리를 전문으로 하는 중소기업이라고 가정, 비용절감을 위해 클라우드 스토리지를 고려하고 있다. 고객의 파일을 온프레미스에서 클라우들 완전히 옮기는 것을 고려 중, 하지만 일단 비용에 중점을 두고 시험해보려고 한다. 가장 좋은 방법은?

 스토리지를 선택할 때 무엇이 주 고려사항이냐?
->  로컬에 데이터를 저장할 수 있어야 한다.
-> Storage Gateway
저장 볼륨 vs 캐싱 볼륨 중 선택해야 하는데, 경영진이 원본 파일을 클라우드에 두기를 원한다면?
-> 저장볼륨은 로컬과 S3에 저장하면서 로컬의 사본을 캐시해서 사용할 수 있다. 즉, 로컬 파일을 데이터의 원본으로 사용하는 한편, 클라우드를 기본스토리지로 사용하지 않으면서도 클라우드 스토리지를 시험해 볼 수 있다.
-> 캐싱볼륨은 파일을 로컬에 저장하고 백업으로 S3에 푸시한다.

[참고]
프레미스(On-premise)란 소프트웨어 등 솔루션을 클라우드 같이 원격 환경이 아닌 자체적으로 보유한 전산실 서버에 직접 설치해 운영하는 방식을 말한다.
Q: 볼륨 게이트웨이란 무엇입니까?

A: 볼륨 게이트웨이는 iSCSI 대상을 제공합니다. 이를 통해 블록 스토리지 볼륨을 생성하고 온프레미스 또는 EC2 애플리케이션 서버에서 이를 iSCSI 디바이스로서 탑재할 수 있습니다. 볼륨 게이트웨이는 캐싱 모드 또는 저장 모드로 실행됩니다.

캐싱 모드에서는 기본 데이터가 S3에 작성되는 반면, 자주 액세스하는 데이터는 액세스 지연 시간을 줄이기 하기 위해 로컬로 캐시에 보존합니다.
저장 모드에서는 기본 데이터가 로컬로 저장되고 액세스 지연 시간을 짧게 유지하기 위해 전체 데이터 세트가 제공되고 AWS에 비동기식으로 백업됩니다.

어느 모드에서든 볼륨의 특정 시점 스냅샷을 생성하고 이를 AWS의 Amazon EBS 스냅샷으로 저장할 수 있으므로 데이터 보호, 복구, 마이그레이션 및 다양한 기타 사본 데이터 요구에 맞게 버전 지정된 볼륨 복사본을 공간 효율적으로 생성할 수 있습니다.



3. 웹디자인 팀, 5GB가 넘는 큰 압축 이미지파일을 S3에 ‘자주’ 업로드합니다.
최근 업로드가 허용되는 최대 객체 크기를 초과합니다라는 오류 발생, 조치를 어떻게 해야할까
-> S3에서 크기가 제한되는 것은 객체이다. 단일 객체의 최대 크기는 5TB이다. 100MB보다 큰 객체는 멀티 파트 업로드를 사용하는 것이 좋다.

4. S3에서 최종 일관성이 있는 HTTP 메소드
-> 새로운 객체 PUT은 쓰기 후 읽기 일관성이 있다.
DELETE와 덮어쓰기 PUT은 최종 일관성이 있다.

5. Obyte 파일도 s3에 업로드할 수 있다.

6. S3 버킷을 새로 만들 때 URL
https://s3-us-east-2.amazonaws.com/사용자지정이름

즉 FQDN(정규화된 도메인 이름) 뒤에 ‘/’ 그분 기호와 버킷이름을 적어주면 된다.
아마존.com 앞에 리전 코드가 나온다.

7. 버킷에 직접적으로 엑세스하지 않고 S3에서 호스팅하는 웹사이트에 엑세스 하는 경우.
-> 웹사이트 호스팅을 활성화 하려면 버킷 이름에 FQDN을 지정해야 한다. 버킷에 직접 엑세스하려면 FQDN 맨 앞에 버킷 이름을 넣어서 구분해야 한다. 버킷 이름 다음에 FQDN의 하위 도메인으로 s3-website 가 리전코드와 ‘-’로 연결되어서 표기된다는 사실을 암기하자.
http://버킷이름.s3-website.us-east-2.amazonaws.com/images

8. AWS Management Console에서 모든 리전(글로벌=고유하다)으로 보이는 서비스
->
1) S3버킷은 리전 내에서 생성되지만 AWS Management Console과 계정에는 항상 모든 S3버킷이 표시된다. 특정 리전에서 버킷을 만들어도 버킷 이름은 글로벌로 고유하다.
2) IAM 권한은 글로벌이며 모든 리전에 영향을 미친다. 
* RDS 와 EC2 인스턴스는 리전별로 다르며 AWS Management Console에서는 해당 리전의 리소스만 나타난다.

9. EBS 볼륨은 블록 기반 스토리지(즉, 객체 기반이 아니다)이고, 마그네틱 및 SSD 유형을 선택할 수 있다. (기본 EBS 볼륨은 SSD이다)






10. 애플리케이션을 실행할 인스턴스의 AMI를 만드는 DevOps 작업을 하고 있다. 애플리케이션을 여러 리전에 배포하고 이를 여러 S3 버킷과 연결해야함. 또한 us-east-1에서 만들었던 AMI를 us-east-2, us-west-2에서도 사용해야 한다. 여기에서 새로운 AMI를 사용하려면 어떻게 해야할까?

-> 우선 AMI는 특정 리전에서만 존재한다. 따라서 계정이나 보안과는 무관하다. 해결을 위해 AMI를 복사한 후 수동 구동해야 한다. 즉 1에서 2로 AMI를 복사하고, 시작 권한과 S3버킷 권한을 적용해 복사한 AMI로 새 인스턴스를 시작해야한다.  인스턴스에는 S3에 연결할 수 있는 권한 또는 역할이 없기 때문에 단지 복사한 AMI를 사용해 새로운 인스턴스를 시작할 수는 없다.


11. 데이터를 RDS 인스턴스에 저장하고, 최소 2개의 지리적 위치에 분산하려면 어떻게 해야 하는가?
-> RDS에서 다중 가용영역(AZ) 구성을 활성화 한다. 혹은 교차 리전 읽기 전용 복제본 구성을 활성화 한다.
* 읽기 전용 복제본은 자동으로 다른 AZ 또는 리전에 설치되지 않으므로 정확한 해결책이 되지 못하고, Storage Gateway는 RDS가 아닌 S3를 지원하기 때문에 역시 올바른 해결책이 되지 못한다.

12. Auto Scaling 의 시작 구성에 해당하는 것은?
시작 구성은 주로 새 인스턴스 생성과 관련이 있고, 해당 인스턴스의 세부 구성 항목을 추상화한다. 따라서 인스턴스의 AMI 및 IAM 역할은 구성의 일반적인 사항이며, 생성하는 모든 인스턴스에 적용한다. (새로운 인스턴스를 생성하는데 사용하는 AMI, 인스턴스에 연결할 IAM 역할)
* 지연시간에 대한 폴링 시간은 새 인스턴스 시작과 연결되지 않고, 인스턴스마다 다른 EBS 볼륨을 연결하며 한 EBS 볼륨은 여러 인스턴스와 연결할 수 없다.

13. Auto Scaling 정책에서 새 인스턴스를 만들 AMI를 설정하기 위해 사용해야하는 것은 무엇일까?
-> 시작 구성에서 새 인스턴스의 생성(시작)에 대한 세부 정보를 지정한다. 
* 보안 그룹에선느 시작한 인스턴스에서 송수신할 트래픽 허용을 지정한다.




14. EC2 인스턴스를 종료하면 인스턴스에 연결된 EBS 루트 볼륨도 삭제된다는 걸 늦게 알아차렸다. 이 문제를 해결하려면 어떻게 조치해야 할까?
-> 아예 방법이 없는 것은 아니다. EBS 루트 볼륨은 연결된 인스턴스가 종료될 때 삭제되는 것이 기본 설정이지만, 변경도 할 수 있기 때문이다.
-> 스냅샷을 만들더라도 EBS 볼륨은 여전히 삭제된다.
-> AWS CLI (또는 AWS Management Console)에서 인스턴스 종료 후 루트 볼륨이 유지되도록 설정할 수 있다. AWS CLS를 사용해 EBS 볼륨의 DeleteOnTermination 속성을 ‘false’로 변경한다.

15. EBS 스냅샷을 S3에 백업할 방법은?
-> EBS 볼륨은 S3에 증분백업한다.

16. EBS 볼륨은 동시에 여러 인스턴스에 연결할 수 없다.

17. EC2 인스턴스에 무엇으로 메타 데이터를 추가할까?
-> Certificates 와 Tags 
-> 모든 인스턴스와 서비스에는 태그를 지정할 수 있으며, 이것이 메타 데이터이다.
인증서는 SSL과 관련이 있으며 사이트 또는 전송의 자격증명을 정의하는데 사용한다. 
* 정책은 권한 및 역할과 관련이 있으며, 레이블은 현재 AWS 구성이 아니다.
